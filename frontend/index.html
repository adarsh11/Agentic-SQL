<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agentic SQL | AI-Powered Data Analytics</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;700&family=JetBrains+Mono:wght@400;500&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>

<body>
    <div class="bg-glow"></div>
    <div class="bg-glow-2"></div>

    <nav>
        <div class="logo">
            <i class="fas fa-brain-circuit"></i>
            <span>Agentic<span>SQL</span></span>
        </div>
        <div class="nav-links">
            <a href="#" id="viewSchemaBtn"><i class="fas fa-database"></i> View Schema</a>
            <a href="https://github.com" target="_blank"><i class="fab fa-github"></i> GitHub</a>
        </div>
    </nav>

    <main class="container">
        <header class="hero">
            <h1>NLP to SQL <span class="text-gradient">Multi-Agent</span> System</h1>
            <p>Transform your natural language questions into optimized PostgreSQL queries using our intelligent
                multi-agent orchestration.</p>
        </header>

        <section class="query-section">
            <div class="input-card">
                <div class="input-header">
                    <div class="dropdown-wrapper">
                        <label for="suggestionSelect"><i class="fas fa-magic"></i> Suggestions</label>
                        <select id="suggestionSelect">
                            <option value="" disabled selected>Select a sample question...</option>
                            <option value="Who are the top 10 customers by total spending?">Top 10 customers by spending
                            </option>
                            <option value="Which products are low in stock (less than 10 units)?">Low stock products
                            </option>
                            <option value="Show me the average rating for products by category">Ratings by category
                            </option>
                            <option value="List all shipments delivered in the last 30 days">Recent deliveries</option>
                            <option value="Total revenue generated by month this year">Revenue trends</option>
                        </select>
                    </div>
                </div>
                <div class="input-wrapper">
                    <i class="fas fa-search search-icon"></i>
                    <textarea id="queryInput" placeholder="Ask your data anything..." rows="2"></textarea>
                    <button id="generateBtn" class="btn-primary">
                        <span>Generate SQL</span>
                        <i class="fas fa-paper-plane"></i>
                    </button>
                </div>
            </div>
        </section>

        <section id="resultSection" class="result-section hidden">
            <div class="result-header">
                <div class="status-bar">
                    <div class="status-item">
                        <span class="label">Status:</span>
                        <span id="statusBadge" class="badge success">Complete</span>
                    </div>
                    <div class="status-item">
                        <span class="label">Category:</span>
                        <span id="categoryLabel" class="value">-</span>
                    </div>
                    <div class="status-item">
                        <span class="label">Accuracy:</span>
                        <span id="accuracyLabel" class="value">0%</span>
                    </div>
                </div>
                <button id="toggleLogsBtn" class="btn-toggle">
                    <i class="fas fa-terminal"></i>
                    <span>Show Agent Logs</span>
                    <i class="fas fa-chevron-down toggle-icon"></i>
                </button>
            </div>

            <!-- Agent Logs (Collapsible) -->
            <div id="agentLogs" class="card logs-card hidden">
                <div class="card-header">
                    <h3><i class="fas fa-microchip"></i> Agent Activity Traces</h3>
                    <button id="closeLogsBtn" class="btn-close"><i class="fas fa-times"></i></button>
                </div>
                <div class="logs-content">
                    <div class="log-entry planner">
                        <div class="log-header">
                            <span class="agent-tag">Planner Agent</span>
                            <span class="log-time">Step 1</span>
                        </div>
                        <div class="log-body">
                            <p id="plannerReasoning">Waiting for input...</p>
                            <div id="toolOrder" class="tool-tags"></div>
                        </div>
                    </div>
                    <div class="log-entry generator">
                        <div class="log-header">
                            <span class="agent-tag">SQL Generator</span>
                            <span class="log-time">Step 2</span>
                        </div>
                        <div class="log-body">
                            <p>Query generation successfully completed based on schemas.</p>
                            <div class="attempts-count">Attempts: <span id="attemptsLabel">0</span></div>
                        </div>
                    </div>
                    <div class="log-entry evaluator">
                        <div class="log-header">
                            <span class="agent-tag">Evaluator Agent</span>
                            <span class="log-time">Step 3</span>
                        </div>
                        <div class="log-body">
                            <p id="evaluationFeedback">Evaluation pending...</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="dashboard-grid">
                <!-- SQL Code Section -->
                <div class="card sql-card">
                    <div class="card-header">
                        <h3><i class="fas fa-code"></i> Generated PostgreSQL</h3>
                        <button id="copySqlBtn" class="btn-icon" title="Copy SQL"><i class="fas fa-copy"></i></button>
                    </div>
                    <div class="code-container">
                        <pre><code id="sqlOutput">-- Query will appear here...</code></pre>
                    </div>
                </div>

                <!-- Optimization Suggestions -->
                <div class="card suggestions-card">
                    <div class="card-header">
                        <h3><i class="fas fa-lightbulb"></i> Optimization Suggestions</h3>
                    </div>
                    <ul id="optimizationList" class="suggestion-list">
                        <li>Suggestions will appear after processing...</li>
                    </ul>
                </div>
            </div>
        </section>

        <section id="errorSection" class="error-container hidden">
            <i class="fas fa-exclamation-triangle"></i>
            <div class="error-text">
                <h3>Error Occurred</h3>
                <p id="errorMessage"></p>
            </div>
        </section>
    </main>

    <!-- Schema Viewer Modal -->
    <div id="schemaModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fas fa-database"></i> Database Schema</h2>
                <button id="closeSchemaBtn" class="btn-close"><i class="fas fa-times"></i></button>
            </div>
            <div class="modal-body">
                <div class="schema-tabs">
                    <button class="schema-tab active" data-category="0">Customer & Sales</button>
                    <button class="schema-tab" data-category="1">Inventory & Products</button>
                    <button class="schema-tab" data-category="2">Operations & Analytics</button>
                </div>
                <div id="schemaContent" class="schema-content">
                    <p class="loading-text">Loading schema...</p>
                </div>
            </div>
        </div>
    </div>

    <footer>
        <p>&copy; 2025 Agentic SQL System. Powered by Groq, Mistral & FastAPI.</p>
    </footer>

    <script src="script.js"></script>
</body>

</html>